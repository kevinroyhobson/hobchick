function isVertical(){var e=$(window).height();var t=$(window).width();return e>t}function initializeScreens(){picsOnScreenSet={};for(var e=0;e<numTotalPics;e++){picsOnScreenSet[e]=false}var t=[0,1,2,3];t=shuffle(t);t.push(4);t.push(5);cachedImageNumber=getRandomPictureNumberNotCurrentlyVisible();cacheImage(cachedImageNumber);_.each(changeScreenTimeouts,function(e){clearTimeout(e)});changeScreenTimeouts=[];var n=0;var r=isVertical()?getScreensForVertical():getScreensForHorizontal();_.each(r,function(e){var r=Math.floor(t[n]*1e3);var i=setTimeout(function(){changePicture(e)},r);changeScreenTimeouts.push(i);n++})}function getScreensForVertical(){var e=$(".screen-1");e.push($(".screen-2"));e.push($(".screen-5"));e.push($(".screen-6"));e.push($(".screen-3"));e.push($(".screen-4"));return e}function getScreensForHorizontal(){var e=$(".screen-1");e.push($(".screen-x-1"));e.push($(".screen-3"));e.push($(".screen-x-2"));e.push($(".screen-2"));e.push($(".screen-4"));return e}function onResize(){if(isVertical()){setUpVertical()}else{setUpHorizontal()}initializeScreens()}function setUpVertical(){$(".screen-x-1").css("display","none");$(".screen-x-2").css("display","none");$(".screen-5").css("display","block");$(".screen-6").css("display","block");var e=100;var t=Math.floor(($(window).width()-padding*3)/2);var n=Math.floor(t*(1/heightToWidthRatio));var r=Math.floor(t*2+padding*3);var i=($(window).height()-e-3*n-4*padding)/2;var s=0;$(".why-main-container").width(r+"px");$(".why-main-container").css("padding-top",i+"px");$(".row").css("padding-left",s+"px");$(".screen").width(t+"px");$(".screen").height(n+"px")}function setUpHorizontal(){$(".screen-5").css("display","none");$(".screen-6").css("display","none");$(".screen-x-3").css("display","none");$(".screen-x-1").css("display","block");$(".screen-x-2").css("display","block");var e=100;var t=$(window).width();var n=$(window).height()-e;var r;var i;var s=0;var o=0;r=Math.floor((t-padding*4)/3);i=Math.floor(r*(1/heightToWidthRatio));s=(n-2*i-4*padding)/2;if(i*2+padding*4>n){i=Math.floor((n-padding*4)/2);r=Math.floor(i*heightToWidthRatio);s=0;o=(t-3*r-8*padding)/2}var u=Math.floor(r*3+8*padding+o);$(".why-main-container").width(u+"px");$(".why-main-container").css("padding-top",s+"px");$(".row").css("padding-left",o+"px");$(".screen").width(r+"px");$(".screen").height(i+"px")}function showThanks(){if(isVertical()){$(".screen-4").css("margin-top","5px");$(".screen-4").css("margin-left","-25%")}else{$(".screen-4").css("margin-left","5px");$(".screen-4").css("margin-top","-10%")}$(".screen-4").animate({opacity:"1.0"},1e3);setTimeout(function(){$(".screen-4").animate({opacity:"0.0"},1e3);setTimeout(function(){$(".screen-4").css("margin-left","5px");$(".screen-4").css("margin-top","5px")},1e3)},4e3)}function changePicture(e){$(e).animate({opacity:"0.0"},1e3);window.setTimeout(function(){var t=Number($(e).attr("pic-number"));picsOnScreenSet[t]=false;var n="/static/img/why/"+cachedImageNumber+".jpg";$(e).css("background-image","url("+n+")");$(e).attr("pic-number",cachedImageNumber);var r=getRandomPictureNumberNotCurrentlyVisible();cacheImage(r)},1e3);$(e).animate({opacity:"1.0"},1e3);var t=setTimeout(function(){changePicture(e)},6e3);changeScreenTimeouts.push(t)}function cacheImage(e){cachedImage=new Image;cachedImage.src="/static/img/why/"+e+".jpg";cachedImageNumber=e;picsOnScreenSet[e]=true}function getRandomPictureNumberNotCurrentlyVisible(){while(true){var e=Math.floor(Math.random()*numTotalPics);if(picsOnScreenSet[e]==false){return e}else{console.log("picture "+e+" is already on the screen... trying again.")}}}function shuffle(e){var t=e.length,n,r;while(t){r=Math.floor(Math.random()*t--);n=e[t];e[t]=e[r];e[r]=n}return e}var maxScreenWidth;var maxScreenHeight;var padding=5;var heightToWidthRatio=7/5;var numTotalPics=488;var picsOnScreenSet;var changeScreenTimeouts=[];var cachedImageNumber=0;var cachedImage;$(function(){onResize();showThanks();$(window).resize(function(){onResize()})})